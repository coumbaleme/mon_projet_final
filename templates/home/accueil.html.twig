{% extends 'base.html.twig' %}

{% block title %}Accueil ‚Äì BTP Consulting
{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('assets/styles/accueil/heroAccueil.css') }}">
    <link rel="stylesheet" href="{{ asset('assets/styles/accueil/product.css') }}">
    <link rel="stylesheet" href="{{ asset('assets/styles/accueil/responsive.css') }}">
    <link rel="stylesheet" href="{{ asset('assets/styles/accueil/services.css') }}">
{% endblock %}

{% block body %}

	<section class="hero">
		<div class="hero-container">
			<div class="hero-text">
				<h1>L'excellence au service de <span>vos projets BTP</span></h1>
				<p>Nous transformons vos ambitions en r√©alit√© avec des solutions innovantes, durables et sur mesure pour tous vos besoins en construction.</p>
				<div class="hero-buttons">
					<a href="#produits" class="btn-primary">
						<span>üõí</span> D√©couvrir nos produits
					</a>
					<a href="#services" class="btn-secondary">
						<span>üìã</span> Nos services
					</a>
				</div>
			</div>
			<div class="hero-img">
				<img src="https://cdn.prod.website-files.com/62987134cee3f41ed59eeb9d/63073870dfc361717234e245_mini-pelle-5t.png" alt="Engin de chantier">
			</div>
		</div>
	</section>

	<!-- SECTION PRODUITS -->
	<section id="produits">
		<h2>Nos Produits</h2>
		<p class="section-subtitle">D√©couvrez notre gamme d'√©quipements et mat√©riels de qualit√© professionnelle</p>

		{% if product is not empty %}
			<div class="products-grid">
				{% for produit in product %}
					<div class="product-card">
						{# Image du produit #}
						<div class="product-image-container">
							{% if produit.image %}
								<img src="{{ asset('images/product_image/' ~ produit.image) }}" alt="{{ produit.titre }}" class="product-image">
							{% else %}
								<img src="{{ asset('images/placeholder.png') }}" alt="Image non disponible" class="product-image" style="opacity:0.6;">
							{% endif %}
							
							{% if produit.stock < 3 %}
								<div class="product-badge">‚ö° Stock limit√©</div>
							{% endif %}
						</div>

						{# Contenu de la carte #}
						<div class="product-content">
							<h3 class="product-title">{{ produit.titre }}</h3>

							{# Alerte stock #}
							{% if produit.stock < 3 %}
								<div class="stock-warning">
									‚ö†Ô∏è Plus que {{ produit.stock }} en stock
								</div>
							{% endif %}

							{# Actions #}
							<div class="product-actions">
								{# Bouton voir le produit #}
								<a href="{{ path('product_detail', {'id': produit.id}) }}" class="btn-view-product">
									<span>üëÅÔ∏è</span> Voir les d√©tails
								</a>

								{# Formulaire ajout au panier #}
								<form action="{{ path('cart_add', { id: produit.id }) }}" method="post">
									<input type="hidden" name="_token" value="{{ csrf_token('add_to_cart_' ~ produit.id) }}">

									<div class="quantity-section">
										<label for="qty_{{ produit.id }}">Qt√©:</label>
										<input id="qty_{{ produit.id }}" type="number" name="quantity" max="{{ produit.stock }}" min="1" value="1" class="quantity-input">
									</div>

									<button type="submit" class="btn-add-cart">
										<span>üõí</span> Ajouter au panier
									</button>
								</form>
							</div>
						</div>
					</div>
				{% endfor %}
			</div>
		{% else %}
			<p class="no-products" style="text-align: center; color: var(--gray); font-size: 1.2rem; padding: 3rem;">
				Aucun produit disponible pour le moment.
			</p>
		{% endif %}
	</section>

	<!-- STATS -->
	<section class="stats-container">
		<div>
			<div class="stats">30+</div>
			<p>Chantiers actifs</p>
		</div>
		<div>
			<div class="stats">15K m¬≤</div>
			<p>Construits par an</p>
		</div>
		<div>
			<div class="stats">20</div>
			<p>Labels qualit√©</p>
		</div>
		<div>
			<div class="stats">‚úì</div>
			<p>Certifi√© Carte BTP</p>
		</div>
	</section>

	<!-- SERVICES -->
	<section id="services">
		<h2 class="section-title">Nos Services</h2>
		<p class="intro">
			Nous proposons des solutions compl√®tes pour vos projets de construction, r√©novation et infrastructures, avec un engagement fort en qualit√© et s√©curit√©.
		</p>
		<div class="services-grid">
			<div class="service-card">
				<img src="https://cdn-icons-png.flaticon.com/512/2721/2721298.png" alt="Construction">
				<h3>Construction</h3>
				<p>B√¢timents modernes, durables et performants pour tous vos projets.</p>
			</div>
			<div class="service-card">
				<img src="https://cdn-icons-png.flaticon.com/512/3522/3522280.png" alt="R√©novation">
				<h3>R√©novation</h3>
				<p>Modernisation avec respect des normes √©nerg√©tiques et environnementales.</p>
			</div>
			<div class="service-card">
				<img src="https://cdn-icons-png.flaticon.com/512/3063/3063807.png" alt="G√©nie civil">
				<h3>G√©nie Civil</h3>
				<p>Routes, ouvrages d'art et grandes infrastructures de qualit√©.</p>
			</div>
			<div class="service-card">
				<img src="https://cdn-icons-png.flaticon.com/512/1086/1086475.png" alt="Conseil">
				<h3>Conseil & √âtudes</h3>
				<p>Accompagnement technique et √©tudes de faisabilit√© personnalis√©es.</p>
			</div>
		</div>
	</section>

	{# Bandeau cookies #}
	<section id="cookieBanner" class="cookie-banner hide">
		<p>üç™ Ce site utilise des cookies pour am√©liorer votre exp√©rience.</p>
		<button id="acceptCookies" class="btn-success">Accepter</button>
		<button id="refuseCookies" class="btn-danger">Refuser</button>
	</section>

	<script>
		// Bandeau cookies
		const banner = document.getElementById('cookieBanner');
		const acceptBtn = document.getElementById('acceptCookies');
		const refuseBtn = document.getElementById('refuseCookies');

		const choice = localStorage.getItem('cookiesChoice');

		if (!choice) {
			banner.classList.remove('hide');
		} else {
			banner.classList.add('hide');
			console.log('Choix des cookies d√©j√† enregistr√© :', choice);
		}

		acceptBtn.onclick = function () {
			localStorage.setItem('cookiesChoice', 'accepted');
			banner.classList.add('hide');
			console.log('Cookies accept√©s.');
		};

		refuseBtn.onclick = function () {
			localStorage.setItem('cookiesChoice', 'refused');
			banner.classList.add('hide');
			console.log('Cookies refus√©s.');
		};
	</script>
{% endblock %}